<!DOCTYPE html>
<html>
<head>
    <title>Isle 10 World Records</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #111; color: #fff; }
        .wr-box { background: #222; padding: 12px; border-radius: 8px; margin-bottom: 12px; }
        a { color: #4af; }
    </style>
</head>
<body>
<h1>Roblox: Isle 10 â€” All World Records</h1>
<div id="wrs"></div>

<script>
fetch("wr.json")
  .then(res => res.json())
  .then(data => {
    const container = document.getElementById("wrs");

    data.forEach(category => {
      const div = document.createElement("div");
      div.className = "wr-box";

      // Get all runs and ignore nulls
      const runs = Object.values(category.runs).filter(r => r !== null);

      if (runs.length === 0) {
        div.innerHTML = `
          <strong>${category.categoryName}</strong><br>
          WR Time: No WR yet<br>
          Players: -<br>
        `;
      } else {
        // Pick fastest run
        const fastest = runs.reduce((a, b) => {
          const parseTime = t => {
            const m = t.match(/PT(?:(\d+)M)?([\d.]+)S/);
            return (parseFloat(m[1]||0)*60)+parseFloat(m[2]);
          };
          return parseTime(a.time) < parseTime(b.time) ? a : b;
        });

        div.innerHTML = `
          <strong>${category.categoryName}</strong><br>
          WR Time: ${fastest.time}<br>
          Players: ${fastest.players.join(", ")}<br>
          <a href="${fastest.weblink}" target="_blank">View Run</a>
        `;
      }

      container.appendChild(div);
    });
  });
</script>

</body>
</html>
